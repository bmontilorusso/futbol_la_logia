/* ==================================================

Inicialización de la Base de datos del proyecto.

================================================== */

-- Creación de DB y posicionamiento en ella: --

CREATE DATABASE futbol_la_logia;
USE futbol_la_logia;


-- Creación de TABLAS: --

CREATE TABLE PERFILES(
    ID_PERFIL INT(2) AUTO_INCREMENT PRIMARY KEY,
    DETALLE VARCHAR(64) NOT NULL
);

CREATE TABLE REGION(
    ID_REGION INT(4) AUTO_INCREMENT PRIMARY KEY,
    DETALLE VARCHAR(256) NOT NULL,
    PROVINCIA VARCHAR(64) NOT NULL
);

CREATE TABLE CLIMA (
    ID_CLIMA INT(2) AUTO_INCREMENT PRIMARY KEY,
    DETALLE VARCHAR(64) NOT NULL
);

CREATE TABLE TIPO_PARTIDO(
    ID_TIPO_PARTIDO INT(2) AUTO_INCREMENT PRIMARY KEY,
    DETALLE VARCHAR(64) NOT NULL
);

CREATE TABLE ESTADO_PARTIDO(
    ID_ESTADO_PARTIDO INT(2) AUTO_INCREMENT PRIMARY KEY,
    DETALLE VARCHAR(256) NOT NULL
);

CREATE TABLE MOTIVO_NO_JUGADO(
    ID_MOTIVO_NO_JUGADO INT(2) AUTO_INCREMENT PRIMARY KEY,
    DETALLE VARCHAR(256) NOT NULL
);

CREATE TABLE COMPETICION(
    ID_COMPETICION INT(2) AUTO_INCREMENT PRIMARY KEY,
    DETALLE VARCHAR(256) NOT NULL,
    ID_REGION INT(4) NOT NULL,
    FOREIGN KEY (ID_REGION) REFERENCES REGION(ID_REGION)
);

CREATE TABLE USUARIOS(
	ID_USUARIO INT(2) AUTO_INCREMENT PRIMARY KEY,
    NOMBRE VARCHAR(256) NOT NULL,
    APELLIDO VARCHAR(256) NOT NULL,
    USUARIO VARCHAR(64) NOT NULL,
    PASS VARCHAR(64) NOT NULL,
    ID_PERFIL INT(2) NOT NULL,
    FOREIGN KEY (ID_PERFIL) REFERENCES PERFILES(ID_PERFIL)
);

CREATE TABLE JUGADORES(
	ID_JUGADOR INT(4) AUTO_INCREMENT PRIMARY KEY,
    NOMBRE VARCHAR(256) NOT NULL,
    APELLIDO VARCHAR(256) NOT NULL,
    ID_REGION INT(4),
    FOREIGN KEY (ID_REGION) REFERENCES REGION(ID_REGION)
);

CREATE TABLE ESTADIOS(
    ID_ESTADIO INT(4) AUTO_INCREMENT PRIMARY KEY,
    NOMBRE VARCHAR(256) NOT NULL,
    ID_REGION INT(4) NOT NULL,
    FOREIGN KEY (ID_REGION) REFERENCES REGION(ID_REGION)
);

CREATE TABLE PARTIDOS(
    ID_PARTIDO INT(2) AUTO_INCREMENT PRIMARY KEY,
    ID_ESTADIO INT(4) NOT NULL,
    FECHA DATE NOT NULL,
    HORA TIME,
    GOLES_LOCAL INT(2),
    GOLES_VISITANTE INT(2),
    ID_CLIMA INT(2),
    ID_TIPO_PARTIDO INT(2) NOT NULL,
    ID_COMPETICION INT(2),
    ID_ESTADO_PARTIDO INT(2) NOT NULL,
    ID_MOTIVO_NO_JUGADO INT(2),
    FOREIGN KEY (ID_ESTADIO) REFERENCES ESTADIOS(ID_ESTADIO),
    FOREIGN KEY (ID_CLIMA) REFERENCES CLIMA(ID_CLIMA),
    FOREIGN KEY (ID_TIPO_PARTIDO) REFERENCES TIPO_PARTIDO(ID_TIPO_PARTIDO),
    FOREIGN KEY (ID_ESTADO_PARTIDO) REFERENCES ESTADO_PARTIDO(ID_ESTADO_PARTIDO),
    FOREIGN KEY (ID_MOTIVO_NO_JUGADO) REFERENCES MOTIVO_NO_JUGADO(ID_MOTIVO_NO_JUGADO),
    FOREIGN KEY (ID_COMPETICION) REFERENCES COMPETICION(ID_COMPETICION)
);

CREATE TABLE PARTIDOS_JUGADORES (
    ID_PARTIDOS_JUGADORES INT(8) AUTO_INCREMENT PRIMARY KEY,
    ID_PARTIDO INT(2) NOT NULL,
    ID_JUGADOR INT(4) NOT NULL,
    FOREIGN KEY (ID_PARTIDO) REFERENCES PARTIDOS(ID_PARTIDO),
    FOREIGN KEY (ID_JUGADOR) REFERENCES JUGADORES(ID_JUGADOR)
);


-- Insert en las TABLAS: --

INSERT INTO PERFILES (ID_PERFIL, DETALLE) VALUES (1, 'Administrador');
INSERT INTO PERFILES (ID_PERFIL, DETALLE) VALUES (2, 'Usuario General');

INSERT INTO REGION (ID_REGION, DETALLE, PROVINCIA) VALUES (1, 'Temperley', 'Buenos Aires');
INSERT INTO REGION (ID_REGION, DETALLE, PROVINCIA) VALUES (2, 'Banfield', 'Buenos Aires');

INSERT INTO CLIMA (ID_CLIMA, DETALLE) VALUES (1, 'Despejado');
INSERT INTO CLIMA (ID_CLIMA, DETALLE) VALUES (2, 'Noblado');
INSERT INTO CLIMA (ID_CLIMA, DETALLE) VALUES (3, 'Llovizna');
INSERT INTO CLIMA (ID_CLIMA, DETALLE) VALUES (4, 'Lluvia');
INSERT INTO CLIMA (ID_CLIMA, DETALLE) VALUES (5, 'Tormenta');

INSERT INTO TIPO_PARTIDO (ID_TIPO_PARTIDO, DETALLE) VALUES (1, 'Amistoso');
INSERT INTO TIPO_PARTIDO (ID_TIPO_PARTIDO, DETALLE) VALUES (2, 'Torneo');

INSERT INTO ESTADO_PARTIDO (ID_ESTADO_PARTIDO, DETALLE) VALUES (1, 'Finalizado');
INSERT INTO ESTADO_PARTIDO (ID_ESTADO_PARTIDO, DETALLE) VALUES (2, 'Pendiente');
INSERT INTO ESTADO_PARTIDO (ID_ESTADO_PARTIDO, DETALLE) VALUES (3, 'Postergado');
INSERT INTO ESTADO_PARTIDO (ID_ESTADO_PARTIDO, DETALLE) VALUES (4, 'Cancelado');

INSERT INTO MOTIVO_NO_JUGADO (ID_MOTIVO_NO_JUGADO, DETALLE) VALUES (1, 'Falta de gente');
INSERT INTO MOTIVO_NO_JUGADO (ID_MOTIVO_NO_JUGADO, DETALLE) VALUES (2, 'Tormenta');
INSERT INTO MOTIVO_NO_JUGADO (ID_MOTIVO_NO_JUGADO, DETALLE) VALUES (3, 'Alta temperatura');
INSERT INTO MOTIVO_NO_JUGADO (ID_MOTIVO_NO_JUGADO, DETALLE) VALUES (4, 'Baja temperatura');
INSERT INTO MOTIVO_NO_JUGADO (ID_MOTIVO_NO_JUGADO, DETALLE) VALUES (5, 'Otros');

INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Bruno', 'Monti', 'bmonti', 'facil1', 1);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Juli', 'Gardeñes', 'jgarden', 'facil1', 1);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Gato', 'Escalante', 'gescalante', 'facil1', 1);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Ger', 'Gardeñes', 'ggarden', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Mati', 'Gomel', 'mgomel', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Maxi', 'Granado', 'mgranado', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Franco', 'Granado', 'fgranado', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Cabe', 'Casola', 'gcasola', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Mati', 'Panisello', 'mpani', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Nick', 'Ferrero', 'nferrero', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Kaiser', 'Cabaña', 'kaicabana', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Rodri Pela', 'Ortolani', 'rodripela', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Agus Wachi', 'Delgado', 'adelgado', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Fede', 'Amigokai', 'amigokai', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Moi', 'Furia', 'mfuria', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Fede', 'Barbolla', 'fbarbolla', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Lean', 'Daga', 'ldaga', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Lucas', 'Schirri', 'lschirri', 'facil1', 2);
INSERT INTO USUARIOS (NOMBRE, APELLIDO, USUARIO, PASS, ID_PERFIL) VALUES ('Negro', 'Cáseres', 'mcaseres', 'facil1', 2);

INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('La Palmera', 2);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('Arenales Gol', 2);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('ECA', 1);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('El Tablón', 2);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('Cludias', 2);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('Los Pinos', 2);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('Torres del Sol', 2);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('Del Grosso', 1);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('El Porvenir', 1);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('Ituzaingo', 1);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('Saturno', 1);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('Juventud Unida', 1);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('Las Brisas', 2);
INSERT INTO ESTADIOS (NOMBRE, ID_REGION) VALUES ('Pasco Central', 1);


/********* Ajustes sobre la marcha: *********/

-- Ampliamos la tabla JUGADORES: --
ALTER TABLE JUGADORES ADD COLUMN ID_POSICION_PRINCIPAL INT(2);
ALTER TABLE JUGADORES ADD COLUMN ID_POSICIÓN_ALT INT(2);

-- Para saber qué USUARIO abrió la convocatoria: --
ALTER TABLE PARTIDOS ADD COLUMN ID_USUARIO_ALTA INT(2);


/**************************************** Fin del Script ****************************************/

/* 
Para emercencias o Reinicio:
 
DROP DATABASE FUTBOL_LA_LOGIA;

*/